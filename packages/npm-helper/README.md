# npm-helper

ä¸€ä¸ªç”¨äºä¸€é”®è‡ªåŠ¨tagã€å‘åŒ…ã€å¼•å¯¼ç™»å½•npmçš„å·¥å…·ï¼Œç®€åŒ–npmåŒ…çš„å‘å¸ƒæµç¨‹ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ” **ç¯å¢ƒæ£€æŸ¥**: è‡ªåŠ¨æ£€æŸ¥Node.jsã€npmã€gité…ç½®ç­‰ç¯å¢ƒ
- ğŸ” **è‡ªåŠ¨ç™»å½•**: å¼•å¯¼ç”¨æˆ·ç™»å½•npmï¼Œæ”¯æŒäº¤äº’å¼ç™»å½•
- ğŸ“¦ **ç‰ˆæœ¬ç®¡ç†**: æ”¯æŒpatchã€minorã€majorç‰ˆæœ¬æ›´æ–°ï¼Œä¹Ÿæ”¯æŒè‡ªå®šä¹‰ç‰ˆæœ¬
- ğŸ·ï¸ **Git Tag**: è‡ªåŠ¨åˆ›å»ºå’Œæ¨é€git tag
- ğŸš€ **ä¸€é”®å‘å¸ƒ**: å®Œæ•´çš„å‘å¸ƒæµç¨‹ï¼Œä»æ£€æŸ¥åˆ°å‘å¸ƒä¸€æ­¥åˆ°ä½
- ğŸ“‹ **çŠ¶æ€æ£€æŸ¥**: å‘å¸ƒå‰æ£€æŸ¥gitçŠ¶æ€ã€åˆ†æ”¯ã€æœªæäº¤æ–‡ä»¶ç­‰

## ğŸ“¦ å®‰è£…

```bash
npm install @tanggoat/npm-helper
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. æ£€æŸ¥å‘å¸ƒç¯å¢ƒ

åœ¨å‘å¸ƒå‰ï¼Œå»ºè®®å…ˆæ£€æŸ¥ç¯å¢ƒé…ç½®ï¼Œscripté…ç½®ï¼š
```bash
npm-helper check
```

è¿™ä¼šæ£€æŸ¥ï¼š
- Node.jsç‰ˆæœ¬
- npmç‰ˆæœ¬
- Gité…ç½®
- package.jsoné…ç½®
- è¿œç¨‹ä»“åº“é…ç½®

### 2. ä¸€é”®å‘å¸ƒ

å¢åŠ scripté…ç½®ï¼Œè¿è¡Œå‘å¸ƒå‘½ä»¤ï¼š

```bash
npm-helper release
```

å‘å¸ƒæµç¨‹åŒ…æ‹¬ï¼š
1. æ£€æŸ¥gitå·¥ä½œåŒºçŠ¶æ€
2. æ£€æŸ¥å½“å‰åˆ†æ”¯ï¼ˆå»ºè®®åœ¨main/masteråˆ†æ”¯ï¼‰
3. è·å–å½“å‰ç‰ˆæœ¬å’Œnpmæœ€æ–°ç‰ˆæœ¬
4. é€‰æ‹©ç‰ˆæœ¬æ›´æ–°ç±»å‹
5. ç¡®è®¤å‘å¸ƒ
6. æ£€æŸ¥npmç™»å½•çŠ¶æ€ï¼Œå¦‚æœªç™»å½•åˆ™å¼•å¯¼ç™»å½•
7. æ›´æ–°ç‰ˆæœ¬å·
8. åˆ›å»ºgit tagå¹¶æ¨é€
9. å‘å¸ƒåˆ°npm

### 3. åˆ‡æ¢npmæº

å¢åŠ scripté…ç½®ï¼Œè¿è¡Œå‘å¸ƒå‘½ä»¤ï¼š

```bash
npm-helper registry
```

### 4. å®Œæ•´npm-helperä½¿ç”¨

åœ¨é¡¹ç›®çš„package.jsonæ–‡ä»¶ä¸­å¢åŠ scripté…ç½®ï¼š

```bash
"release": npm-helper release
"registry": npm-helper registry
"check": npm-helper check
```

åˆ‡æ¢npmæºåŒ…æ‹¬ï¼š
1. ç½—åˆ—å¯ä½¿ç”¨çš„npmæºï¼ˆnpmå®˜æ–¹æºã€æ·˜å®é•œåƒæºã€è…¾è®¯é•œåƒæºã€åä¸ºé•œåƒæºç­‰ï¼‰
2. å¹¶å¯è‡ªå®šä¹‰npmæº
3. æ— éœ€è®°å¿†æºåœ°å€ä¿¡æ¯ï¼Œæ»¡è¶³ä¸€é”®åˆ‡æ¢


## ğŸ“‹ ç‰ˆæœ¬æ›´æ–°ç±»å‹

- **patch**: è¡¥ä¸ç‰ˆæœ¬ (1.0.0 â†’ 1.0.1) - ä¿®å¤bug
- **minor**: æ¬¡è¦ç‰ˆæœ¬ (1.0.0 â†’ 1.1.0) - æ–°åŠŸèƒ½ï¼Œå‘åå…¼å®¹
- **major**: ä¸»è¦ç‰ˆæœ¬ (1.0.0 â†’ 2.0.0) - ç ´åæ€§æ›´æ–°
- **beta**: Betaç‰ˆæœ¬ (beta) - 1.0.0 â†’ 1.0.1-beta.1 å…¬å¼€æµ‹è¯•ç‰ˆæœ¬
- **alpha**: Alphaç‰ˆæœ¬ (alpha) - 1.0.0 â†’ 1.0.1-alpha.1 å†…éƒ¨æµ‹è¯•ç‰ˆæœ¬
- **custom**: è‡ªå®šä¹‰ç‰ˆæœ¬ - æ‰‹åŠ¨è¾“å…¥ç‰ˆæœ¬å·

## ğŸ”§ é…ç½®è¦æ±‚

### package.json å¿…è¦å­—æ®µ

```json
{
  "name": "your-package-name",
  "version": "1.0.0",
  "description": "åŒ…æè¿°",
  "main": "index.js",
  "license": "ISC",
  "script": {
    "release": "npm-helper release",
    "registry": "npm-helper registry",
    "check": "npm-helper check"
  }
}
```

### Git é…ç½®

ç¡®ä¿å·²é…ç½®Gitç”¨æˆ·ä¿¡æ¯ï¼š

```bash
git config --global user.name "ä½ çš„ç”¨æˆ·å"
git config --global user.email "ä½ çš„é‚®ç®±"
```

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16.0.0
- npm >= 8.0.0
- Git

## ğŸ“ é¡¹ç›®ç»“æ„

```
tang-npm/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ release.js    # ä¸»å‘å¸ƒè„šæœ¬
â”‚   â”œâ”€â”€ check.js      # ç¯å¢ƒæ£€æŸ¥è„šæœ¬
â”‚   â””â”€â”€ version.js    # ç‰ˆæœ¬ç®¡ç†å·¥å…·
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

## ğŸ” è„šæœ¬è¯´æ˜

### release.js
ä¸»å‘å¸ƒè„šæœ¬ï¼ŒåŒ…å«å®Œæ•´çš„å‘å¸ƒæµç¨‹ï¼š
- ç¯å¢ƒæ£€æŸ¥
- ç‰ˆæœ¬é€‰æ‹©
- npmç™»å½•
- gitæ“ä½œ
- npmå‘å¸ƒ

### check.js
ç¯å¢ƒæ£€æŸ¥è„šæœ¬ï¼Œæ£€æŸ¥å‘å¸ƒå‰çš„å‡†å¤‡çŠ¶æ€ï¼š
- Node.jså’Œnpmç‰ˆæœ¬
- Gité…ç½®
- package.jsoné…ç½®
- è¿œç¨‹ä»“åº“é…ç½®

### version.js
ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼š
- è·å–npmæœ€æ–°ç‰ˆæœ¬
- è·å–æœ¬åœ°å½“å‰ç‰ˆæœ¬
- ç‰ˆæœ¬å·æ›´æ–°

## ğŸ› ï¸ è‡ªå®šä¹‰é…ç½®

### .npmignore æ–‡ä»¶

å»ºè®®åˆ›å»º `.npmignore` æ–‡ä»¶æ¥æ§åˆ¶å‘å¸ƒå†…å®¹ï¼š

```
node_modules/
.git/
.gitignore
README.md
scripts/
*.log
```

### ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è‡ªå®šä¹‰è¡Œä¸ºï¼š

```bash
# è·³è¿‡æŸäº›æ£€æŸ¥
SKIP_GIT_CHECK=true npm run release

# æŒ‡å®šnpm registry
npm config set registry https://registry.npmjs.org/
```

## ğŸ› å¸¸è§é—®é¢˜

### Q: å‘å¸ƒå¤±è´¥ï¼Œæç¤ºæƒé™ä¸è¶³
A: ç¡®ä¿å·²æ­£ç¡®ç™»å½•npmï¼Œå¹¶ä¸”æœ‰è¯¥åŒ…çš„å‘å¸ƒæƒé™

### Q: Git tagåˆ›å»ºå¤±è´¥
A: æ£€æŸ¥æ˜¯å¦æœ‰æœªæäº¤çš„æ›´æ”¹ï¼Œç¡®ä¿åœ¨æ­£ç¡®çš„åˆ†æ”¯ä¸Š

### Q: ç‰ˆæœ¬å·æ ¼å¼é”™è¯¯
A: ç¡®ä¿ç‰ˆæœ¬å·æ ¼å¼ä¸º `x.y.z`ï¼Œå¦‚ `1.0.0`

### Q: æ— æ³•è·å–npmæœ€æ–°ç‰ˆæœ¬
A: å¯èƒ½æ˜¯é¦–æ¬¡å‘å¸ƒï¼Œæˆ–è€…ç½‘ç»œé—®é¢˜ï¼Œå·¥å…·ä¼šè‡ªåŠ¨å¤„ç†

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“„ è®¸å¯è¯

ISC License

## ğŸ”— ç›¸å…³é“¾æ¥

- [npmå®˜æ–¹æ–‡æ¡£](https://docs.npmjs.com/)
- [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/)
- [Conventional Commits](https://www.conventionalcommits.org/) 