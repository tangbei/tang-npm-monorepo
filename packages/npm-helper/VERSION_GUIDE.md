# 版本管理指南

## 📦 版本类型说明

npm-helper 工具支持多种版本类型，包括标准版本和预发布版本。

### 标准版本类型

1. **Patch (补丁版本)**
   - 格式: `x.y.z` → `x.y.(z+1)`
   - 示例: `1.0.0` → `1.0.1`
   - 用途: 修复bug，向后兼容

2. **Minor (次要版本)**
   - 格式: `x.y.z` → `x.(y+1).0`
   - 示例: `1.0.0` → `1.1.0`
   - 用途: 新功能，向后兼容

3. **Major (主要版本)**
   - 格式: `x.y.z` → `(x+1).0.0`
   - 示例: `1.0.0` → `2.0.0`
   - 用途: 破坏性更新

### 预发布版本类型

4. **Beta 版本**
   - 格式: `x.y.z` → `x.y.(z+1)-beta.n`
   - 示例: `1.0.0` → `1.0.1-beta.1`
   - 用途: 测试版本，功能基本完成

5. **Alpha 版本**
   - 格式: `x.y.z` → `x.y.(z+1)-alpha.n`
   - 示例: `1.0.0` → `1.0.1-alpha.1`
   - 用途: 早期测试版本，功能可能不完整

6. **自定义版本**
   - 格式: 任意符合语义化版本规范的版本号
   - 示例: `1.0.0-rc.1`, `2.0.0-beta.5`
   - 用途: 特殊版本需求

## 🚀 使用方法

### 1. 标准版本发布

```bash
# 运行发布命令
pnpm release

# 选择版本类型
? 选择版本更新类型: (使用箭头键选择)
❯ 补丁版本 (patch) - 1.0.0 → 1.0.1
  次要版本 (minor) - 1.0.0 → 1.1.0
  主要版本 (major) - 1.0.0 → 2.0.0
  Beta版本 (beta) - 1.0.0 → 1.0.1-beta.1
  Alpha版本 (alpha) - 1.0.0 → 1.0.1-alpha.1
  自定义版本
```

### 2. Beta版本发布

选择 "Beta版本" 后，工具会提示输入beta版本号：

```bash
? 选择版本更新类型: Beta版本 (beta) - 1.0.0 → 1.0.1-beta.1
? 请输入beta版本号 (默认为1): 1

# 结果: 版本从 1.0.0 更新为 1.0.1-beta.1
```

### 3. Alpha版本发布

选择 "Alpha版本" 后，工具会提示输入alpha版本号：

```bash
? 选择版本更新类型: Alpha版本 (alpha) - 1.0.0 → 1.0.1-alpha.1
? 请输入alpha版本号 (默认为1): 2

# 结果: 版本从 1.0.0 更新为 1.0.1-alpha.2
```

### 4. 自定义版本发布

选择 "自定义版本" 后，可以输入任意版本号：

```bash
? 选择版本更新类型: 自定义版本
? 请输入自定义版本号 (格式: x.y.z 或 x.y.z-beta.n 或 x.y.z-alpha.n): 1.0.0-rc.1

# 结果: 版本更新为 1.0.0-rc.1
```

## 📋 版本号规范

### 语义化版本规范 (SemVer)

版本号格式: `主版本号.次版本号.修订号[-预发布标识符[.预发布版本号]]`

- **主版本号**: 不兼容的API修改
- **次版本号**: 向下兼容的功能性新增
- **修订号**: 向下兼容的问题修正
- **预发布标识符**: alpha、beta、rc等
- **预发布版本号**: 预发布版本的序号

### 版本号优先级

```
1.0.0 < 1.0.1-alpha.1 < 1.0.1-alpha.2 < 1.0.1-beta.1 < 1.0.1-rc.1 < 1.0.1
```

## 🔄 版本发布流程

### Beta版本发布流程

1. **开发阶段**: 功能开发完成，准备测试
2. **选择Beta版本**: 运行 `pnpm release` 选择 "Beta版本"
3. **输入版本号**: 输入beta版本号（如：1）
4. **自动更新**: 版本号更新为 `x.y.z-beta.1`
5. **发布**: 发布到npm registry
6. **测试**: 用户测试反馈
7. **修复**: 根据反馈修复问题
8. **再次发布**: 发布 `x.y.z-beta.2` 或正式版本

### Alpha版本发布流程

1. **早期开发**: 功能还在开发中，需要早期测试
2. **选择Alpha版本**: 运行 `pnpm release` 选择 "Alpha版本"
3. **输入版本号**: 输入alpha版本号（如：1）
4. **自动更新**: 版本号更新为 `x.y.z-alpha.1`
5. **发布**: 发布到npm registry
6. **内部测试**: 内部团队测试
7. **功能完善**: 继续开发完善功能
8. **升级版本**: 发布 `x.y.z-alpha.2` 或升级到beta版本

## ⚠️ 注意事项

### 1. 版本号递增

- Beta和Alpha版本会自动基于当前版本递增patch号
- 例如：当前版本 `1.0.0`，选择beta版本会生成 `1.0.1-beta.1`

### 2. 预发布版本标识

- 支持标准的预发布标识符：alpha、beta、rc、pre等
- 自定义版本时可以使用任意有效的预发布标识符

### 3. 版本号验证

- 工具会自动验证版本号格式
- 支持标准版本号和预发布版本号格式
- 格式错误会提示重新输入

### 4. 发布建议

- **Alpha版本**: 用于内部测试，功能可能不完整
- **Beta版本**: 用于公开测试，功能基本完成
- **RC版本**: 发布候选版本，功能完整，等待最终验证
- **正式版本**: 经过充分测试的稳定版本

## 🔗 相关资源

- [语义化版本 2.0.0](https://semver.org/lang/zh-CN/)
- [npm版本管理](https://docs.npmjs.com/cli/v8/commands/npm-version)
- [预发布版本最佳实践](https://docs.npmjs.com/cli/v8/using-npm/developers#prerelease-versions) 